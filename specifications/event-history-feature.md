# 最近アクセス履歴機能 仕様書

## 1. 概要

- ユーザーが過去にアクセスしたイベントの履歴をローカルストレージに保存し、PWA ホーム画面（/home）や履歴ページ（/history）で一覧表示できる機能。
- 履歴からワンクリックでイベント詳細ページに遷移可能。

## 2. 目的

- ユーザーが以前アクセスしたイベントを素早く再訪できるようにする。
- 主催者・参加者ともに、直近で利用したイベントへのアクセス性を向上させる。

## 3. 画面・UI

- PWA ホーム画面（/home）や履歴ページ（/history）に「最近アクセスしたイベント」一覧セクションを表示。
  - タイトル・最終アクセス日時を表示。
  - クリックでイベント詳細ページへ遷移。
- 履歴が 1 件もない場合は「最近アクセスしたイベントはありません」と表示。

## 4. データ構造

- ローカルストレージキー: `eventHistory`
- データ型: `[{ id: string, title: string, lastAccessed: string }]`
- イベント詳細ページアクセス時に履歴を自動追加・更新
- 表示は新しい順

## 5. 主な処理フロー

- イベント詳細ページアクセス時に、イベント ID・タイトル・アクセス日時を履歴リストに追加/更新
- 履歴一覧はローカルストレージから取得し、PWA ホームや履歴ページで表示
- 履歴の最大件数を制限（例: 20 件）し、古いものから削除

## 6. 今後の拡張方針

- サーバーサイド保存（認証導入時）
- 履歴の手動削除・ピン留め機能
- 履歴の検索・フィルタ機能

## 7. 実装ファイル

- `/src/components/event-history/`（履歴管理・表示）
- `/src/app/home/page.tsx`（履歴一覧表示）
- `/src/app/history/page.tsx`（履歴専用ページ）
- `/src/app/event/[public_id]/page.tsx`（履歴追加処理）

---

本仕様は PWA ホーム画面・履歴ページの「最近アクセス履歴」機能の実装内容を反映しています。
